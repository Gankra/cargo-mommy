<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js oranda-light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Concepts - cargo-mommy</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">
        <link rel="stylesheet" href="../oranda-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "oranda-light" : "oranda-light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('orandamdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('orandamdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('orandamdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('oranda-light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../customize/index.html"><strong aria-hidden="true">2.</strong> Customizing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../customize/roles-and-pronouns.html"><strong aria-hidden="true">2.1.</strong> Roles And Pronouns</a></li><li class="chapter-item expanded "><a href="../customize/moods.html"><strong aria-hidden="true">2.2.</strong> Moods</a></li><li class="chapter-item expanded "><a href="../customize/true-roles.html"><strong aria-hidden="true">2.3.</strong> True Roles</a></li><li class="chapter-item expanded "><a href="../customize/not-just-cargo.html"><strong aria-hidden="true">2.4.</strong> Not Just Cargo</a></li><li class="chapter-item expanded "><a href="../customize/nsfw.html"><strong aria-hidden="true">2.5.</strong> NSFW Features</a></li><li class="chapter-item expanded "><a href="../customize/never-nsfw.html"><strong aria-hidden="true">2.6.</strong> Removing NSFW Features</a></li></ol></li><li class="chapter-item expanded "><a href="../guides/index.html"><strong aria-hidden="true">3.</strong> Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guides/powershell.html"><strong aria-hidden="true">3.1.</strong> Powershell (Windows)</a></li><li class="chapter-item expanded "><a href="../guides/bash.html"><strong aria-hidden="true">3.2.</strong> Bash</a></li><li class="chapter-item expanded "><a href="../guides/ci.html"><strong aria-hidden="true">3.3.</strong> CI</a></li></ol></li><li class="chapter-item expanded "><a href="../contributing/index.html"><strong aria-hidden="true">4.</strong> Contributing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../contributing/concepts.html" class="active"><strong aria-hidden="true">4.1.</strong> Concepts</a></li><li class="chapter-item expanded "><a href="../contributing/adding-messages.html"><strong aria-hidden="true">4.2.</strong> Adding New Messages</a></li><li class="chapter-item expanded "><a href="../contributing/adding-variables.html"><strong aria-hidden="true">4.3.</strong> Adding A New Variable</a></li><li class="chapter-item expanded "><a href="../contributing/adding-moods.html"><strong aria-hidden="true">4.4.</strong> Adding A New Mood</a></li><li class="chapter-item expanded "><a href="../contributing/docs.html"><strong aria-hidden="true">4.5.</strong> Locally Building The Website</a></li><li class="chapter-item expanded "><a href="../contributing/releasing.html"><strong aria-hidden="true">4.6.</strong> Releasing</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="oranda-light">Axo Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="oranda-dark">Axo Dark</button></li>

                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">cargo-mommy</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="concepts"><a class="header" href="#concepts">Concepts</a></h1>
<p>At her heart, mommy exists to invoke cargo, check if the result was a success or failure, and print an appropriate message~
Printing that message involves reading a bunch of configuration from env-vars to define pools of values to randomly select from, then:</p>
<ol>
<li>randomly <a href="#moods">decide what mood the response should have</a></li>
<li>use the success/failure state to select which <a href="#message-pools">pool of messages</a> from that mood to use</li>
<li>randomly select <a href="#messages">a message</a> from that pool</li>
<li>randomly format the message's template with any <a href="#variables">variables</a> it uses (plus the implicit emote)</li>
</ol>
<p>cargo-mommy has 3 major components~</p>
<ol>
<li><a href="https://github.com/Gankra/cargo-mommy/blob/main/responses.json">responses.json, where data lives</a></li>
<li><a href="https://github.com/Gankra/cargo-mommy/blob/main/build.rs">build.rs, that digests that data and converts it to rust code</a></li>
<li><a href="https://github.com/Gankra/cargo-mommy/blob/main/src/main.rs">main.rs, that handles execution</a></li>
</ol>
<p>The build.rs is extremely extra, but it's actually kind of useful for making it tolerable to <a href="../customize/never-nsfw.html">disable nsfw features</a>. In theory it also makes cargo-mommy very efficient and fast, which, again, is very extra.</p>
<h2 id="responsesjson"><a class="header" href="#responsesjson">Responses.json</a></h2>
<p>The ""schema"" of <a href="https://github.com/Gankra/cargo-mommy/blob/main/responses.json">responses.json</a> is currently the following (<code>$SOME_VALUE</code> here is an ~arbitrary string):</p>
<pre><code class="language-text">{
    "moods": {
        "$MOOD": {
            "positive": ["$GOOD_MESSAGE", ...]
            "negative": ["$BAD_MESSAGE" ...]
            "overflow": ["$E_TOO_MANY_MOMMY_MESSAGE", ...]
            "spiciness": "chill" | "thirsty" | "yikes" | &lt;defaults to "chill"&gt;,
        }
    }
    "vars": {
        "$VAR": {
            "defaults": ["$VALUE", ...]
            "env_key": "$KEY" | &lt;defaults to $VAR&gt;
            "spiciness": "chill" | "thirsty" | "yikes" | &lt;defaults to "chill"&gt;,
        }
    }
}
</code></pre>
<h3 id="moods"><a class="header" href="#moods">Moods</a></h3>
<p>Moods contain <a href="#message-pools">pools of messages</a> with a particular feeling/intensity. This was originally introduced to allow the user to opt into <a href="../customize/nsfw.html">nsfw functionality</a>. Its functionality is more general than that, and we'd be happy to have more sfw moods like "furry" or whatever.</p>
<p>The "chill" mood is the default mood, and is assumed to exist.</p>
<p>Spiciness is used to determine whether a mood's contents should be considered "nsfw" content, either "chill", "thirsty", or "yikes". Everything spicier than "chill" is considered "nsfw". There's no hard and fast rules here, just vibes. Spicier moods also gain access to spicier <a href="#variables">variables</a>.</p>
<p>There are 2 moods that have the same names as their equivalent spiciness level, which may help determine how nsfw a new mood is.</p>
<h3 id="message-pools"><a class="header" href="#message-pools">Message Pools</a></h3>
<p>Each mood must specify 3 pools of <a href="#messages">messages</a> to select from:</p>
<ul>
<li>"positive" messages appear when the cargo command mommy invoked was a success</li>
<li>"negative" messages appear when the cargo command mommy invoked was a failure</li>
<li>"overflow" messages appear when it was recursively invoked too many times (to break out of infinite loops from misconfiguration)</li>
</ul>
<h3 id="messages"><a class="header" href="#messages">Messages</a></h3>
<p>Messages are strings that optionally contain <a href="#variables"><code>{variables}</code></a> that need to be substituted (emotes don't appear in the message, they're just auto-applied to the end of every message).</p>
<p>Some examples:</p>
<p>"{role} thinks {pronoun} little {affectionate_term} earned a big hug~"</p>
<p>Becomes something like:</p>
<p>"Mommy thinks her little girl earned a big hug~ ❤️"</p>
<p>Messages have the following conventions:</p>
<ul>
<li><code>{role} ends {pronoun} messages with tildes~</code></li>
<li><code>*{role} performs actions with asterisks*</code></li>
<li><code>*{role} combines both*\nwith newlines~</code></li>
</ul>
<h3 id="variables"><a class="header" href="#variables">Variables</a></h3>
<p>Variables are a pool of values that will be randomly selected from, and substituted into the templates.</p>
<p>The variables "mood", "emote", "pronoun", and "role" are explicitly named in cargo_mommy's main.rs, and are assumed to appear at the start of <code>vars</code> in that exact order.</p>
<p>Spiciness is used to determine whether a variable's contents should be considered "nsfw" -- either "chill", "thirsty", or "yikes". Everything spicier than "chill" is considered "nsfw". There's no hard and fast rules here, just vibes. Spicier variables should only ever be used by spicier <a href="#moods">moods</a>.</p>
<p>env_key is used to define a SCREAMING_CASE env-var <code>CARGO_{TRUE_ROLE}S_{ENV_KEY}S</code> (note the two extra S's!). For instance the "mood" key would be <code>CARGO_MOMMYS_MOODS</code>.</p>
<p>If a variable's env-var isn't set, it will use its defaults as the pool. ("role" has no default value in responses.json because it has special logic to default to the <a href="../customize/true-roles.html">True Role</a> when no custom roles are set.)</p>
<p>If a variable's env-var <em>is</em> set, mommy will parse it as <a href="../customize/roles-and-pronouns.html">ISO Standard Pronoun Syntax</a>, which is to say a slash-delimited list like "she/he/they", "girl/boy", or "daddy", and use those values as the pool.</p>
<p>Each time mommy encounters a variable that needs to be substituted in a message, it will randomly select a new value from the pool.</p>
<p>At the end of a message, mommy will randomly decide whether to include an emote.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../contributing/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../contributing/adding-messages.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../contributing/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../contributing/adding-messages.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
